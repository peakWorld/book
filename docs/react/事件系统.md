# 事件系统
React自己维护的一套事件体系。整个有 事件初始化、事件绑定、事件触发、生成事件对象这几个部分。

## 事件初始化
为了抹平不同平台间的差异, 使用插件注入的方式。每个插件中都注明了每个React事件对应的原生事件和事件对象的生成方式。声明了一些全局变量, 给事件绑定使用。

## 事件绑定
事件绑定主要发生中Dom元素初始化中。只有在Props中声明了真实存在的事件属性, 才会走绑定事件逻辑。对于不会冒泡的事件绑定在当前节点, 大多事件通过事件代理的方式方式绑定在root元素上。绑定一个React事件, 需要绑定所有的依赖事件。有个对象来标志已绑定事件, 防止重复绑定。

## 事件触发
执行批处理, 设定批处理标志。回调函数中的所有setState合并执行一次。
事件回调函数处理完成, 执行react更新操作。
用户立马可见变化事件为高优先级任务, 直接使用同步更新。
将生成事件对象时维护的回调函数队列数组, 按顺序执行。 阻止冒泡, 是阻止react事件体系中的冒泡。

## 生成事件对象
所有事件共用一个事件对象池, 事件对象是用构造函数生成, 重写了许多属性。每次事件触发时, 复用事件池中的对象。
从对应fiber对象往上查找所有的父fiber对象, 只要父fiber的props中有相应事件的回调函数, 按顺序保存在相应的数组中。
捕获 从最高父级往当前元素, 冒泡从 当前元素往最高父级。